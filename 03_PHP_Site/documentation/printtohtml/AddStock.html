<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>AddStock.php</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<style type="text/css">
<!--
body {color: #000000; background-color: #ffffff; font-family: Monospaced}
pre {color: #000000; background-color: #ffffff; font-family: Monospaced}
table {color: #000000; background-color: #e9e8e2; font-family: Monospaced}
.ST0 {background-color: #e9eff8; font-family: Monospaced; font-weight: bold}
.ST2 {font-family: Monospaced; font-weight: bold}
.PHP_VARIABLE {color: #6d3206}
.ST1 {color: #009900}
.string {color: #ce7b00}
.keyword {color: #0000e6}
.heredocdelimiter {color: #6c3d03}
-->
</style>
</head>
<body>
<table width="100%"><tr><td align="center">C:\xampp\htdocs\SkyDrive\Assignment3\AddStock.php</td></tr></table>
<pre>
  1 <span class="ST0">&lt;?php</span>
  2 
  3 <span class="keyword">function</span> badinput(<span class="PHP_VARIABLE">$msg</span>) {
  4     <span class="keyword">echo</span> <span class="heredocdelimiter">&lt;&lt;&lt;BADINPUT</span>
  5 <span class="string">    &lt;!DOCTYPE html&gt;</span>
  6 <span class="string">&lt;html&gt;</span>
  7 <span class="string">    &lt;head&gt;</span>
  8 <span class="string">        &lt;title&gt;Add Stock&lt;/title&gt;</span>
  9 <span class="string">        &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;</span>
 10 <span class="string">    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;./css/style1.css&quot;/&gt;</span>
 11 <span class="string">    &lt;/head&gt;</span>
 12 <span class="string">    &lt;body&gt;</span>
 13 <span class="string">    &lt;div class=&quot;head&quot;&gt;</span>
 14 <span class="string">            &lt;table&gt;</span>
 15 <span class="string">                &lt;tr&gt;</span>
 16 <span class="string">                    &lt;th&gt;&lt;img src=&quot;./siteimages/stack-of-books.jpg&quot;/&gt;&lt;/th&gt;</span>
 17 <span class="string">                    &lt;td&gt;&lt;h1&gt;Illawarra Antiquarian Books&lt;/h1&gt;&lt;/td&gt;</span>
 18 <span class="string">                &lt;/tr&gt;</span>
 19 <span class="string">            &lt;/table&gt;</span>
 20 <span class="string">        &lt;/div&gt;</span>
 21 <span class="string">        &lt;div class=&quot;body&quot;&gt;</span>
 22 <span class="string">            &lt;h1&gt;Error&lt;/h1&gt;</span>
 23 <span class="string">            &lt;form&gt;</span>
 24 <span class="string">                &lt;fieldset&gt;</span>
 25 <span class="string">        &lt;h2&gt;Your request could not be completed because </span><span class="PHP_VARIABLE">$msg</span><span class="string">.&lt;/h2&gt;</span>
 26 <span class="string">            &lt;/fieldset&gt;</span>
 27 <span class="string">            &lt;/form&gt;</span>
 28 <span class="string">            &lt;h3&gt;&lt;input type=&#39;button&#39; onclick=&quot;window.location=&#39;./AddStock.php&#39;&quot; value=&#39;Go Back&#39;/&gt;&lt;/h3&gt;</span>
 29 <span class="string">        &lt;/div&gt;</span>
 30 <span class="string">        &lt;div class=&quot;foot&quot;&gt;</span>
 31 <span class="string">            &lt;a href=&quot;./index.php&quot;&gt;Home&lt;/a&gt;&lt;a&gt;&lt;/a&gt;</span>
 32 <span class="string">        &lt;/div&gt;</span>
 33 <span class="string">    &lt;/body&gt;</span>
 34 <span class="string">&lt;/html&gt;</span>
 35 <span class="heredocdelimiter">BADINPUT</span>;
 36 }
 37 
 38 <span class="keyword">function</span> display_addstock_form() {
 39     <span class="PHP_VARIABLE">$phpself</span> = <span class="PHP_VARIABLE">$_SERVER</span>[<span class="string">&quot;PHP_SELF&quot;</span>];
 40     <span class="keyword">echo</span> <span class="heredocdelimiter">&lt;&lt;&lt;ADDSTOCKFORM</span>
 41 <span class="string">    &lt;!DOCTYPE html&gt;</span>
 42 <span class="string">&lt;html&gt;</span>
 43 <span class="string">    &lt;head&gt;</span>
 44 <span class="string">        &lt;title&gt;Add Stock&lt;/title&gt;</span>
 45 <span class="string">        &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;</span>
 46 <span class="string">    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;./css/style1.css&quot;/&gt;</span>
 47 <span class="string">    &lt;/head&gt;</span>
 48 <span class="string">    &lt;body&gt;</span>
 49 <span class="string">    &lt;div class=&quot;head&quot;&gt;</span>
 50 <span class="string">            &lt;table&gt;</span>
 51 <span class="string">                &lt;tr&gt;</span>
 52 <span class="string">                    &lt;th&gt;&lt;img src=&quot;./siteimages/stack-of-books.jpg&quot;/&gt;&lt;/th&gt;</span>
 53 <span class="string">                    &lt;td&gt;&lt;h1&gt;Illawarra Antiquarian Books&lt;/h1&gt;&lt;/td&gt;</span>
 54 <span class="string">                &lt;/tr&gt;</span>
 55 <span class="string">            &lt;/table&gt;</span>
 56 <span class="string">        &lt;/div&gt;</span>
 57 <span class="string">        &lt;div class=&quot;body&quot;&gt;</span>
 58 <span class="string">            &lt;h1&gt;Add book&lt;/h1&gt;</span>
 59 <span class="string">            &lt;form action=&#39;</span><span class="PHP_VARIABLE">$phpself</span><span class="string">&#39; method=&#39;post&#39;&gt;</span>
 60 <span class="string">                &lt;fieldset&gt;</span>
 61 <span class="string">                    &lt;legend&gt;&lt;h1&gt;New Stock&lt;/h1&gt;&lt;/legend&gt;</span>
 62 <span class="string">                    &lt;h2&gt;Genre   </span>
 63 <span class="string">                        &lt;select name=&quot;genre&quot;&gt;</span>
 64 <span class="string">                            &lt;option value=&quot;null&quot;&gt;  &lt;/option&gt;</span>
 65 <span class="string">                            &lt;option value=&quot;Art&quot;&gt;Art and architecture&lt;/option&gt;</span>
 66 <span class="string">                            &lt;option value=&quot;Bio&quot;&gt;Biography&lt;/option&gt;</span>
 67 <span class="string">                            &lt;option value=&quot;Child&quot;&gt;Children&lt;/option&gt;</span>
 68 <span class="string">                            &lt;option value=&quot;Drama&quot;&gt;Drama&lt;/option&gt;</span>
 69 <span class="string">                            &lt;option value=&quot;Erotic&quot;&gt;Erotica&lt;/option&gt;</span>
 70 <span class="string">                            &lt;option value=&quot;History&quot;&gt;History&lt;/option&gt;</span>
 71 <span class="string">                            &lt;option value=&quot;Military&quot;&gt;Military&lt;/option&gt;</span>
 72 <span class="string">                            &lt;option value=&quot;Music&quot;&gt;Music&lt;/option&gt;</span>
 73 <span class="string">                            &lt;option value=&quot;Foreign&quot;&gt;Non English Language books&lt;/option&gt;</span>
 74 <span class="string">                            &lt;option value=&quot;Lit&quot;&gt;Novels&lt;/option&gt;</span>
 75 <span class="string">                            &lt;option value=&quot;Occult&quot;&gt;Occult&lt;/option&gt;</span>
 76 <span class="string">                            &lt;option value=&quot;Phil&quot;&gt;Philosophy&lt;/option&gt;</span>
 77 <span class="string">                            &lt;option value=&quot;Photo&quot;&gt;Photography&lt;/option&gt;</span>
 78 <span class="string">                            &lt;option value=&quot;Poet&quot;&gt;Poetry&lt;/option&gt;</span>
 79 <span class="string">                            &lt;option value=&quot;Pol&quot;&gt;Politics and  Economics&lt;/option&gt;</span>
 80 <span class="string">                            &lt;option value=&quot;Religion&quot;&gt;Religion&lt;/option&gt;</span>
 81 <span class="string">                            &lt;option value=&quot;SciEng&quot;&gt;Science and Engineering&lt;/option&gt;</span>
 82 <span class="string">                            &lt;option value=&quot;Sport&quot;&gt;Sport&lt;/option&gt;</span>
 83 <span class="string">                            &lt;option value=&quot;Travel&quot;&gt;Travel and Exploration&lt;/option&gt;          </span>
 84 <span class="string">                        &lt;/select&gt; Title &lt;input type=&#39;text&#39; name=&#39;title&#39; size=&#39;45&#39;/&gt;&lt;/h2&gt;</span>
 85 <span class="string">                    &lt;h2&gt;Author  &lt;input type=&#39;text&#39; name=&#39;author&#39; size=&#39;30&#39;/&gt; </span>
 86 <span class="string">                    Publisher   &lt;input type=&#39;text&#39; name=&#39;publisher&#39; size=&#39;30&#39;/&gt;&lt;/h2&gt;</span>
 87 <span class="string">                    &lt;h2&gt;Year    &lt;input type=&#39;text&#39; name=&#39;year&#39; size=&#39;4&#39;/&gt;</span>
 88 <span class="string">                      Price   &lt;input type=&#39;text&#39; name=&#39;price&#39; size=&#39;6&#39;/&gt;&lt;/h2&gt;</span>
 89 <span class="string">                    &lt;h2&gt;Summary&lt;/h2&gt;&lt;textarea name=&#39;summary&#39; rows=&quot;10&quot; cols=&quot;74&quot;&gt;&lt;/textarea&gt;</span>
 90 <span class="string">                    &lt;h2&gt;Description (condition, binding etc)&lt;/h2&gt;&lt;textarea name=&#39;description&#39; rows=&quot;10&quot; cols=&quot;74&quot;&gt;&lt;/textarea&gt;&lt;br/&gt;&lt;br/&gt;</span>
 91 <span class="string">                    &lt;h3&gt;&lt;input type=&#39;submit&#39; value=&#39;Add record&#39;/&gt;&lt;/h3&gt;</span>
 92 <span class="string">                &lt;/fieldset&gt;</span>
 93 <span class="string">            &lt;/form&gt;</span>
 94 <span class="string">            &lt;h3&gt;&lt;input type=&#39;button&#39; onclick=&quot;window.location=&#39;./VendorLogin.php&#39;&quot; value=&#39;Go Back&#39;/&gt;&lt;/h3&gt;</span>
 95 <span class="string">        &lt;/div&gt;</span>
 96 <span class="string">        &lt;div class=&quot;foot&quot;&gt;</span>
 97 <span class="string">            &lt;a href=&quot;./index.php&quot;&gt;Home&lt;/a&gt;&lt;a&gt;&lt;/a&gt;</span>
 98 <span class="string">        &lt;/div&gt;</span>
 99 <span class="string">    &lt;/body&gt;</span>
100 <span class="string">&lt;/html&gt;</span>
101 <span class="heredocdelimiter">ADDSTOCKFORM</span>;
102 }
103 
104 <span class="keyword">function</span> connectToDatabase() {
105     <span class="keyword">global</span> <span class="PHP_VARIABLE">$mysqli</span>;
106     <span class="PHP_VARIABLE">$mysqli</span> = <span class="keyword">new</span> mysqli(<span class="string">&#39;localhost&#39;</span>, <span class="string">&#39;root&#39;</span>, <span class="string">&#39;&#39;</span>, <span class="string">&#39;iab&#39;</span>);
107 
108     <span class="keyword">if</span> (mysqli_connect_errno()) {
109         <span class="PHP_VARIABLE">$problem</span> = mysqli_connect_error();
110         badinput(<span class="PHP_VARIABLE">$problem</span>);
111         <span class="keyword">exit</span>;
112     }
113 }
114 
115 <span class="keyword">function</span> add_stock() {
116     <span class="keyword">global</span> <span class="PHP_VARIABLE">$mysqli</span>;
117     <span class="PHP_VARIABLE">$genre</span> = <span class="PHP_VARIABLE">$_POST</span>[<span class="string">&quot;genre&quot;</span>];
118     <span class="PHP_VARIABLE">$title</span> = <span class="PHP_VARIABLE">$_POST</span>[<span class="string">&quot;title&quot;</span>];
119     <span class="PHP_VARIABLE">$author</span> = <span class="PHP_VARIABLE">$_POST</span>[<span class="string">&quot;author&quot;</span>];
120     <span class="PHP_VARIABLE">$publisher</span> = <span class="PHP_VARIABLE">$_POST</span>[<span class="string">&quot;publisher&quot;</span>];
121     <span class="PHP_VARIABLE">$year</span> = <span class="PHP_VARIABLE">$_POST</span>[<span class="string">&quot;year&quot;</span>];
122     <span class="PHP_VARIABLE">$price</span> = <span class="PHP_VARIABLE">$_POST</span>[<span class="string">&quot;price&quot;</span>];
123     <span class="PHP_VARIABLE">$summary</span> = <span class="PHP_VARIABLE">$_POST</span>[<span class="string">&quot;summary&quot;</span>];
124     <span class="PHP_VARIABLE">$description</span> = <span class="PHP_VARIABLE">$_POST</span>[<span class="string">&quot;description&quot;</span>];
125     <span class="keyword">if</span> (<span class="PHP_VARIABLE">$genre</span> == <span class="string">&quot;null&quot;</span>) {
126         badinput(<span class="string">&quot; genre is missing&quot;</span>);
127         <span class="keyword">exit</span>;
128     }
129     <span class="keyword">if</span> (<span class="keyword">empty</span>(<span class="PHP_VARIABLE">$title</span>)) {
130         badinput(<span class="string">&quot; title is missing&quot;</span>);
131         <span class="keyword">exit</span>;
132     }
133     <span class="keyword">if</span> (<span class="keyword">empty</span>(<span class="PHP_VARIABLE">$author</span>)) {
134         badinput(<span class="string">&quot; author is missing&quot;</span>);
135         <span class="keyword">exit</span>;
136     }
137     <span class="keyword">if</span> (<span class="keyword">empty</span>(<span class="PHP_VARIABLE">$publisher</span>)) {
138         badinput(<span class="string">&quot; publisher is missing&quot;</span>);
139         <span class="keyword">exit</span>;
140     }
141     <span class="keyword">if</span> (<span class="keyword">empty</span>(<span class="PHP_VARIABLE">$year</span>)) {
142         badinput(<span class="string">&quot; year is missing&quot;</span>);
143         <span class="keyword">exit</span>;
144     }
145     <span class="keyword">if</span> (<span class="keyword">empty</span>(<span class="PHP_VARIABLE">$price</span>)) {
146         badinput(<span class="string">&quot; price is missing&quot;</span>);
147         <span class="keyword">exit</span>;
148     }
149     <span class="keyword">if</span> (<span class="keyword">empty</span>(<span class="PHP_VARIABLE">$summary</span>)) {
150         badinput(<span class="string">&quot; summary is missing&quot;</span>);
151         <span class="keyword">exit</span>;
152     }
153     <span class="PHP_VARIABLE">$pat</span> = <span class="string">&#39;/^[a-zA-Z0-9\s.,();&amp;]+$/&#39;</span>;
154     <span class="keyword">if</span> (!preg_match(<span class="PHP_VARIABLE">$pat</span>, <span class="PHP_VARIABLE">$author</span>)) {
155         badinput(<span class="string">&quot; invalid author&quot;</span>);
156         <span class="keyword">exit</span>;
157     }
158     <span class="keyword">if</span> (!preg_match(<span class="PHP_VARIABLE">$pat</span>, <span class="PHP_VARIABLE">$publisher</span>)) {
159         badinput(<span class="string">&quot; invalid publisher&quot;</span>);
160         <span class="keyword">exit</span>;
161     }
162     <span class="PHP_VARIABLE">$patnum</span> = <span class="string">&#39;/^[0-9]+$/&#39;</span>;
163     <span class="keyword">if</span> (!preg_match(<span class="PHP_VARIABLE">$patnum</span>, <span class="PHP_VARIABLE">$year</span>)) {
164         badinput(<span class="string">&quot; invalid year&quot;</span>);
165         <span class="keyword">exit</span>;
166     }
167     <span class="PHP_VARIABLE">$patnum2</span> = <span class="string">&#39;/^[0-9\s.$]+$/&#39;</span>;
168     <span class="keyword">if</span> (!preg_match(<span class="PHP_VARIABLE">$patnum2</span>, <span class="PHP_VARIABLE">$price</span>)) {
169         badinput(<span class="string">&quot; invalid price&quot;</span>);
170         <span class="keyword">exit</span>;
171     }
172     <span class="PHP_VARIABLE">$summary</span> = str_replace(<span class="string">&quot;&#39;s&quot;</span>, <span class="string">&#39;`s&#39;</span>, <span class="PHP_VARIABLE">$summary</span>);
173     <span class="PHP_VARIABLE">$summary</span> = str_replace(<span class="string">&quot;&#39;v&quot;</span>, <span class="string">&#39;`v&#39;</span>, <span class="PHP_VARIABLE">$summary</span>);
174     <span class="PHP_VARIABLE">$summary</span> = str_replace(<span class="string">&quot;s&#39;&quot;</span>, <span class="string">&#39;s`&#39;</span>, <span class="PHP_VARIABLE">$summary</span>);
175     <span class="PHP_VARIABLE">$summary</span> = str_replace(<span class="string">&quot;&#39;m&quot;</span>, <span class="string">&#39;`m&#39;</span>, <span class="PHP_VARIABLE">$summary</span>);
176     <span class="PHP_VARIABLE">$summary</span> = str_replace(<span class="string">&quot;&#39;t&quot;</span>, <span class="string">&#39;`t&#39;</span>, <span class="PHP_VARIABLE">$summary</span>);
177     <span class="PHP_VARIABLE">$summary</span> = str_replace(<span class="string">&quot;&#39;e&quot;</span>, <span class="string">&#39;`e&#39;</span>, <span class="PHP_VARIABLE">$summary</span>);
178     <span class="PHP_VARIABLE">$summary</span> = str_replace(<span class="string">&quot;&#39;&quot;</span>, <span class="string">&#39;`&#39;</span>, <span class="PHP_VARIABLE">$summary</span>);
179     <span class="PHP_VARIABLE">$description</span> = str_replace(<span class="string">&quot;&#39;s&quot;</span>, <span class="string">&#39;`s&#39;</span>, <span class="PHP_VARIABLE">$description</span>);
180     <span class="PHP_VARIABLE">$description</span> = str_replace(<span class="string">&quot;&#39;v&quot;</span>, <span class="string">&#39;`v&#39;</span>, <span class="PHP_VARIABLE">$description</span>);
181     <span class="PHP_VARIABLE">$description</span> = str_replace(<span class="string">&quot;s&#39;&quot;</span>, <span class="string">&#39;s`&#39;</span>, <span class="PHP_VARIABLE">$description</span>);
182     <span class="PHP_VARIABLE">$description</span> = str_replace(<span class="string">&quot;&#39;m&quot;</span>, <span class="string">&#39;`m&#39;</span>, <span class="PHP_VARIABLE">$description</span>);
183     <span class="PHP_VARIABLE">$description</span> = str_replace(<span class="string">&quot;&#39;t&quot;</span>, <span class="string">&#39;`t&#39;</span>, <span class="PHP_VARIABLE">$description</span>);
184     <span class="PHP_VARIABLE">$description</span> = str_replace(<span class="string">&quot;&#39;e&quot;</span>, <span class="string">&#39;`e&#39;</span>, <span class="PHP_VARIABLE">$description</span>);
185     <span class="PHP_VARIABLE">$description</span> = str_replace(<span class="string">&quot;&#39;&quot;</span>, <span class="string">&#39;`&#39;</span>, <span class="PHP_VARIABLE">$description</span>);
186     connectToDatabase();
187 
188     <span class="PHP_VARIABLE">$query</span> = <span class="string">&quot;</span><span class="string">insert into Books values(null, &#39;</span><span class="PHP_VARIABLE">$genre</span><span class="string">&#39;,&#39;</span><span class="PHP_VARIABLE">$title</span><span class="string">&#39;,&#39;</span><span class="PHP_VARIABLE">$author</span><span class="string">&#39;,&#39;</span><span class="PHP_VARIABLE">$publisher</span><span class="string">&#39;,&#39;</span><span class="PHP_VARIABLE">$year</span><span class="string">&#39;,&#39;</span><span class="PHP_VARIABLE">$price</span><span class="string">&#39;,&#39;</span><span class="PHP_VARIABLE">$summary</span><span class="string">&#39;,&#39;</span><span class="PHP_VARIABLE">$description</span><span class="string">&#39;)</span><span class="string">&quot;</span>;
189     <span class="PHP_VARIABLE">$mysqli</span>-&gt;query(<span class="PHP_VARIABLE">$query</span>);
190     <span class="PHP_VARIABLE">$errorreport</span> = <span class="PHP_VARIABLE">$mysqli</span>-&gt;<span class="ST1">error</span>;
191     <span class="keyword">if</span> (!<span class="keyword">empty</span>(<span class="PHP_VARIABLE">$errorreport</span>)) {
192         <span class="keyword">echo</span> <span class="heredocdelimiter">&lt;&lt;&lt;FAILRESPONSE</span>
193 <span class="string">        &lt;html&gt;</span>
194 <span class="string">            &lt;head&gt;&lt;title&gt;Failure Page&lt;/title&gt;&lt;/head&gt;</span>
195 <span class="string">            &lt;h1&gt;Database update failed&lt;/h1&gt;</span>
196 <span class="string">        &lt;body&gt;</span>
197 <span class="string">            &lt;p&gt;</span><span class="PHP_VARIABLE">$errorreport</span><span class="string">.&lt;/p&gt;</span>
198 <span class="string">                &lt;a href=&quot;./AddStock.php&quot;&gt;Back&lt;/a&gt;&lt;a&gt;&lt;/a&gt;</span>
199 <span class="string">            &lt;/body&gt;</span>
200 <span class="string">            &lt;/html&gt;</span>
201 <span class="heredocdelimiter">FAILRESPONSE</span>;
202     } <span class="keyword">else</span> {
203         <span class="PHP_VARIABLE">$result</span> = <span class="PHP_VARIABLE">$mysqli</span>-&gt;query(<span class="string">&quot;SELECT LAST_INSERT_ID()&quot;</span>);
204         <span class="PHP_VARIABLE">$row</span> = <span class="PHP_VARIABLE">$result</span>-&gt;fetch_row();
205         <span class="PHP_VARIABLE">$ident</span> = <span class="PHP_VARIABLE">$row</span>[0];
206         <span class="keyword">echo</span> <span class="heredocdelimiter">&lt;&lt;&lt;SUCCESSRESPONSE</span>
207 <span class="string">   &lt;html&gt;</span>
208 <span class="string">       &lt;head&gt;&lt;title&gt;Book record added&lt;/title&gt;</span>
209 <span class="string">        &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;./css/style1.css&quot;/&gt;&lt;/head&gt;</span>
210 <span class="string">       &lt;body&gt;</span>
211 <span class="string">        &lt;div class=&quot;head&quot;&gt;</span>
212 <span class="string">            &lt;table&gt;</span>
213 <span class="string">                &lt;tr&gt;</span>
214 <span class="string">                    &lt;th&gt;&lt;img src=&quot;./siteimages/stack-of-books.jpg&quot;/&gt;&lt;/th&gt;</span>
215 <span class="string">                    &lt;td&gt;&lt;h1&gt;Illawarra Antiquarian Books&lt;/h1&gt;&lt;/td&gt;</span>
216 <span class="string">                &lt;/tr&gt;</span>
217 <span class="string">            &lt;/table&gt;</span>
218 <span class="string">        &lt;/div&gt;</span>
219 <span class="string">            &lt;div class=&quot;body&quot;&gt;</span>
220 <span class="string">                &lt;h1&gt;Book record added&lt;/h1&gt;</span>
221 <span class="string">                &lt;p&gt;The record was added as book number #</span><span class="PHP_VARIABLE">$ident</span><span class="string">.&lt;/p&gt;&lt;br/&gt;</span>
222 <span class="string">                &lt;input type=&#39;button&#39; onclick=&quot;window.location=&#39;./AddPicture.php?id=</span><span class="PHP_VARIABLE">$ident</span><span class="string">&#39;&quot; value=&#39;Add a picture for this book&#39;/&gt;</span>
223 <span class="string">                &lt;input type=&#39;button&#39; onclick=&quot;window.location=&#39;./AddStock.php?id=</span><span class="PHP_VARIABLE">$ident</span><span class="string">&#39;&quot; value=&#39;Add another book&#39;/&gt;</span>
224 <span class="string">            &lt;/div&gt;</span>
225 <span class="string">            &lt;div class=&quot;foot&quot;&gt;</span>
226 <span class="string">                &lt;a href=&quot;./index.php&quot;&gt;Home&lt;/a&gt;&lt;a&gt;&lt;/a&gt;</span>
227 <span class="string">            &lt;/div&gt;</span>
228 <span class="string">        &lt;/body&gt;</span>
229 <span class="string">    &lt;/html&gt;</span>
230 <span class="heredocdelimiter">SUCCESSRESPONSE</span>;
231         <span class="PHP_VARIABLE">$mysqli</span>-&gt;close();
232     }
233 }
234 
235 session_start();
236 <span class="PHP_VARIABLE">$uname</span> = <span class="PHP_VARIABLE">$_SESSION</span>[<span class="string">&quot;vendorusername&quot;</span>];
237 <span class="keyword">if</span> (!<span class="keyword">isset</span>(<span class="PHP_VARIABLE">$uname</span>)) {
238     header(<span class="string">&quot;Location: VendorLogin.php&quot;</span>);
239     <span class="keyword">exit</span>;
240 }
241 <span class="PHP_VARIABLE">$method</span> = <span class="PHP_VARIABLE">$_SERVER</span>[<span class="string">&quot;REQUEST_METHOD&quot;</span>];
242 <span class="keyword">if</span> (<span class="PHP_VARIABLE">$method</span> == <span class="string">&quot;POST&quot;</span>) {
243     add_stock();
244 } <span class="keyword">else</span> {
245     display_addstock_form();
246 }
247 <span class="ST2">?&gt;</span>
</pre></body>
</html>
